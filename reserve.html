<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserve</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
</head>
<body>
    <button type="button" class="btn btn-info" href="/home">Home</button>
    <h1>Make Reservation</h1>
    <form action="/reserve">
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Name</label>
            <input type="email" class="form-control" id="name" placeholder="Name">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Phone Number</label>
            <input type="email" class="form-control" id="number" placeholder="Number">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Email address</label>
            <input type="email" class="form-control" id="email" placeholder="Email">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Unique ID</label>
            <input type="email" class="form-control" id="unique-id" placeholder="ID">
        </div>
        <button type='submit' id="add-btn">Submit Reservation</button>
    </form>

    <script type="text/javascript">
        const addBtn = document.getElementById('add-btn');
      
      // Question: What is "e" short for?
      addBtn.addEventListener('click', (e) => {
        e.preventDefault();

        // Question: What does this code do?
        let resName = document.getElementById('name').value.trim();
        let resNumber = document.getElementById('number').value.trim();
        let resEmail = document.getElementById('email').value.trim();
        let resId = document.getElementById('unique-id').value.trim();
        
        let newReservation = {
          name: resName,
          email: resEmail,
          number: parseInt(resnumber),
          id: parseInt(resId),
        };

        // Question: What does this code do??
        fetch('/api/reservation', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(newReservation),
        })
          .then((response) => response.json())
          .then((data) => {
            console.log('add.html', data);
            alert(`Adding reservation: ${data.name}`);
          })
          .catch((error) => {
            console.error('Error:', error);
          });
      });
    </script>
</body>
</html>